<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>NEMS: Introduction to NEMS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="make-images-fit.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NEMS
   &#160;<span id="projectnumber">feature/documentation@6b989eaee9</span>
   </div>
   <div id="projectbrief">This is a living document and may be updated at any time.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('introduction.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Introduction to NEMS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The NOAA Environmental Modeling System (NEMS) is the infrastructure underlying a <b>coupled modeling system</b> that supports predictions of Earth's environment at a range of time scales. Examples of other coupled modeling systems are the <a href="http://www.cesm.ucar.edu">Community Earth System Model (CEEM)</a> and the <a href="http://www.metoffice.gov.uk/research/modelling-systems/unified-model">Met Office Unified Model</a></p>
<p><b>A model component</b> is a software representation of a physical domain or process, for example sea ice. It is often developed by a team of specialists in that domain. Model coupling is a software representation of feedbacks between physical processes. It involves modifying the exported fields of a component through grid, unit, temporal, and other transformations so that they can be used as the inputs for another component.</p>
<p>NEMS includes infrastructure for coupling model components representing major Earth system domains and processes. <b>External model components</b> have a primary repository that is not at the NCEP Envionmental Modeling Center (EMC). In general, model components are coupled through the NEMS mediator (in other coupled modeling systems this is often called the "coupler"). NEMS also includes some specialized mediators; for example, for space weather. In some cases in NEMS, the model components are coupled "in-line", meaning that they are called directly from another model component instead of having fields sent through the mediator.</p>
<p>NEMS can be assembled into a number of different <b>modeling applications</b> (often shortened to just applications). Modeling applications are associated with a purpose, like medium-range forecasting; a set of model components; and a set of parameters that represent a range of supported options, including grids and resolutions. Different NEMS modeling applications can have different types and numbers of model components. Also, the same physical domain may be represented by different model components in different modeling applications. For example, in some NEMS modeling applications the ocean component may be the HYbrid Coordinate Ocean Model (HYCOM) and in others it may be the Modular Ocean Model (MOM).</p>
<p><a href="https://docs.google.com/spreadsheets/d/1RS-fTBYnfSIWrJYfalD2lAI-bUOGM0frNPEMIO_ND28/edit#gid=0">This spreadsheet lists anticipated NEMS modeling applications</a>. For each modeling application, the spreadsheet includes the set of model components that is the target for final system delivery, and the set of components in initial and incremental deliveries. Note that this spreadsheet does not include all anticipated configurations! There are many test configurations that are not represented on the spreadsheet. Documentation about each of the NEMS applications and components is in general the responsibility of its original developers. <a href="https://docs.google.com/spreadsheets/d/1CLT66uzJrjrsY-um0jB5hU-Gfeh3_VCIJDA4-Ibmu5s/edit#gid=0">Links to available documentation on NEMS applications and components have been compiled here.</a></p>
<h2>Compilation and Execution </h2>
<p>Since there are multiple NEMS modeling applications, each with multiple model components, and multiple modes for each model component type (prognostic, prescribed data, etc.), there is a lot of complexity in the NEMS system. It is important to have a consistent way of working with the NEMS code base, and especially of coordinating changes to the NEMS code base.</p>
<p>Modeling applications can be assembled using a tool called the [NEMSAppBuilder](building). This tool enables each modeling application team to fully control its source code.</p>
<p>Development and analysis of modeling applications in NEMS will require the use of other component modes besides prognostic components. Prescribed data components, stub components that don't send any fields, and other options are needed for technical testing and controlled scientific experimentation. The tool called Component Sets, or <a href="https://esgf.esrl.noaa.gov/projects/couplednems/compsets">Compsets</a>, enables testing of each model application in numerous configurations. Execution of compsets is done by the [NEMSCompsetRun](running).</p>
<ul>
<li><a class="el" href="running.html">Running: NEMSCompsetRun</a></li>
<li><a class="el" href="building.html">Compiling: NEMSAppBuilder and GNUmakefile</a></li>
</ul>
<h2>Infrastructure </h2>
<p><a href="https://www.earthsystemcog.org/projects/esmf/">NEMS is built using the Earth System Modeling Framework (ESMF)</a> infrastructure software. ESMF provides utilities like generation of interpolation weights and utilities for calendar and timee management, and also wrappers that create a standard component calling interface. This enables model components developed at different sites to be coupled more easily.</p>
<p><a href="https://earthsystemcog.org/projects/nuopc/">The National Unified Operational Prediction Capability (NUOPC) Layer</a> adds additional rules about how ESMF models interact and increases their interoperability. The NUOPC Layer covers aspects from the level of build dependencies, to standardization of initialization phases, all the way to standard names of the exchanged fields. NEMS is an example of a modeling system built using the NUOPC Layer architecture.</p>
<h2>Architecture </h2>
<p>The NEMS architecture is based on an ESMF component hierarchy with the application driver <code>MAIN_NEMS</code> at the top, calling into the <code>NEMS_COMP</code> component which in turn drives the <code>EARTH_COMP</code> component. The <code>EARTH_COMP</code> drives the <code>ATM</code> component (which calls into options <code>GSM, NMMB</code>, or <code>FIM</code>). The architecture allows for multiple <code>EARTH_COMP</code> instances, supporting ensemble applications such as the Global Ensemble Forecast System (GEFS).</p>
<p>Coupled NEMS includes atmosphere, ocean, ice, wave, land, aerosol/chemistry, and hydrologic models, with coupling interface and utilities based on the <a href="https://www.earthsystemcog.org/projects/esmf/">Earth System Modeling Framework (ESMF)</a>. The NEMS applications also utilize intreopereability conventions introduced by the <a href="https://www.earthsystemcog.org/projects/nuopc/">National Unified Operational Prediction Capability (NUOPC)</a>.</p>
<ul>
<li><a class="el" href="architecture.html">Architecture</a></li>
<li><a class="el" href="structure.html">Repository Structure and Versioning</a></li>
</ul>
<h2>Quick Build and Run </h2>
<h3>6.1.1 Download</h3>
<p>Use the following git command to download the top of the master of a NEMS application </p>
<pre class="fragment">git clone gerrit:EMC_appname
</pre><p>To get a specific branch or hash, <code>&lt;REV&gt;</code>, </p>
<pre class="fragment">git clone gerrit:EMC_appname -b &lt;REV&gt; 
</pre><p>In this command, <code>&lt;REV&gt;</code> can be a branch name (ie. <code>master</code>), a tag name (<code>tags/version-1.2.3</code>) or the hash of a specific version (<code>ecea67a941675b30f036995a5d6d16cd9df5b185</code>)</p>
<p>For some older revisions of apps, the code only exists in Subversion.: </p>
<pre class="fragment">svn co -r &lt;REV&gt; https://svnemc.ncep.noaa.gov/projects/nems/apps/&lt;APPname&gt;/trunk
</pre><p>In some places on this site, the prefix <code>DREV</code> is used to indicate that the revision is on a development trunk. The prefix R indicates that a revision is on an application trunk. These prefixes should not be included in the command, just the revision number.</p>
<p>The <code>git</code> or <code>svn</code> commands will download all of the necessary pieces including constituent components from different repositories. It is possible to access the very latest working revision of the code by omitting the <code>"-r REV"</code> part from the <code>SVN</code> command when downloading by revision number. This may be convenient during development, however, it is not recommended for validation work where it is critical to keep track of the precise revision information.</p>
<p>There are a few ways to find out more about specific revisions and the features that they contain. The links under the Milestone Revisions header on the left navigation bar describe revisions that are documented and tested for particular <a href="https://docs.google.com/spreadsheets/d/1RS-fTBYnfSIWrJYfalD2lAI-bUOGM0frNPEMIO_ND28/edit#gid=0">application milestones</a>. The development tasks completed for each revision are included in the <a href="https://docs.google.com/spreadsheets/d/1C0k9AfH9DZHmJCW_bSdK2TzfFB9qLjyE8416nqqXjTM/edit#gid=0">task prioritization spreadsheet</a>.</p>
<h3>6.1.2 Build</h3>
<p>Change into the <code>&lt;Application&gt;</code> directory created by the git or svn command during download. Then build the app using: </p>
<pre class="fragment">cd NEMS
make app=&lt;name&gt;
</pre><p>where <code>&lt;name&gt;</code> refers to a <code>&lt;name&gt;.appBuilder</code> file at the application level directory. The end result of the build process is a NEMS executable <code>(./NEMS/exe/NEMS.x)</code> that is configured to run the application.</p>
<h3>6.1.3 Run</h3>
<p>Below are general instructions on how to run a NEMS application. There may be some special or additional directions for running a particular application configuration (for example, for the cold start in UGCS-Seasonal). Please see the links under specific Milestone Revisions for these instructions.</p>
<p>From within the <code>&lt;Application&gt;</code> directory execute the <code>NEMS CompsetRun</code> tool by typing: </p>
<pre class="fragment">./NEMS/NEMSCompsetRun
</pre><p>This command will automatically run all of the compsets listed in the <code>&lt;Application&gt;.compsetRun</code> file. This file can be edited to change the compsets that are being run. New <code>CompsetRun</code> files can also be created and explicitly specified when calling the <code>NEMSCompsetRun</code> tool. Finally, new application specific compsets can be created and added to the repository. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
