<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>NEMS: Architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="make-images-fit.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NEMS
   &#160;<span id="projectnumber">feature/documentation@6b989eaee9</span>
   </div>
   <div id="projectbrief">This is a living document and may be updated at any time.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('architecture.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Architecture </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The NEMS architecture is based on an ESMF component hierarchy with the application driver <code>MAIN_NEMS</code> at the top, calling into the <code>NEMS_COMP</code> component which in turn drives the <code>EARTH_COMP</code> component. The <code>EARTH_COMP</code> drives the <code>ATM</code> component (which calls into options <code>GSM, NMMB</code>, or <code>FIM</code>). The architecture allows for multiple <code>EARTH_COMP</code> instances, supporting ensemble applications such as the Global Ensemble Forecast System (GEFS).</p>
<p>Coupled NEMS includes atmosphere, ocean, ice, wave, land, aerosol/chemistry, and hydrologic models, with coupling interface and utilities based on the <a href="https://www.earthsystemcog.org/projects/esmf/">Earth System Modeling Framework (ESMF)</a>. The NEMS applications also utilize intreopereability conventions introduced by the <a href="https://www.earthsystemcog.org/projects/nuopc/">National Unified Operational Prediction Capability (NUOPC)</a>.</p>
<p>Key architecture features of the coupled NEMS:</p>
<ul>
<li>Data exchanges between major model components go through a central (NEMS) mediator component. There may be multiple versions of this central mediator (e.g. for global and regional systems), and there may be additional specialized mediators (e.g. for the 3D interactions associated with space weather coupling).</li>
<li>The NEMS mediator component is an integral part of the NEMS software. The mediator source code is managed alongside the NEMS source code, is integrated into the NEMS make system and is built when the NEMS executable is built.</li>
<li>The atmosphere models (currently GSM, FIM, NMMB) currently remain as parts of the NEMS software. Their source code is managed alongside the NEMS source code, they are integrated into the NEMS make system and are built when the NEMS executable is built. This is likely to change in the future.</li>
<li>Ocean, ice, wave and other models are treated by NEMS as external dependencies. Their source code is managed outside of NEMS, typically in the proximity of the organization maintaining the official version of the model. Each model maintains its own separate make system with a NUOPC compliant build option. NEMS requires that the pre-built models are available when the NEMS executable is being built.</li>
<li>All of the components driven by they EARTH_COMP are NUOPC-compliant components.</li>
<li>All of the components driven by they EARTH_COMP can be configured to run on a specific set of PETs (MPI processes), supporting concurrent or sequential component execution.</li>
</ul>
<p>The coupled NEMS version extends the original NEMS version by implementing the EARTH_COMP level as a NUOPC compliant driver that accepts a NUOPC compliant mediator component and NUOPC compliant model components (ATMs, OCNs, ICEs, WAVs). The diagram below shows the architecture of the target coupled NEMS system. Although not shown, recent developments in the mediator are adding separate land and hydrology components as siblings to ATM, OCN, ICE, and WAV.</p>
<p>The specific OCN, ICE, WAV models are shown within clouds outside of the NEMS box to indicate that NEMS handles them as external dependencies. Data exchanges between components are handled by generic NUOPC_Connector components indicated by green arrows. The generic connectors perform basic regrid and redist operations as needed to take field data from one side to the other. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
